# 标准查询解析器

solr 默认查询解析器为 “lucene” 解析器

## 参数

| 参数 | 说明 |
| :--- | :--- |
| q | 使用标准查询语法的查询语句，该参数为必须的 |
| q.op | 查询表达式默认操作，取值为 AND \| OR，取代 solrconfig.xml里的配置 |
| df | 默认字段， ，取代 solrconfig.xml里的配置 |

## 响应

略

## 规格化词条

标准查询解析器把查询分解为词条和操作符，有 2 种词条：单个词条和短语

* 单个词条：单个的单词，例如 "test"，"hello"
* 短语：双引号包围的多个单词，例如 "hello dolly"

多个词条可以被逻辑操作符连接起来组成复杂查询

> 重要的是，查询和索引时使用相同的分析器来分解词条；否则，搜索时就可能产生意料之外的结果

## 词条编辑器

### 通配符搜索

| 类型 | 通配符 | 示例 |
| :--- | :--- | :--- |
| 匹配单个字符 | ? | te?t，匹配 test 和 text |
| 匹配多个字符 | \* | tes\*，匹配 test testing tester |

### 模糊搜索

solr 标准查询解析器支持模糊搜索，基于 Damerau-Levenshtein Distance 或 Edit Distance 算法。要执行模糊搜索，在单个词条末尾使用波浪符~，示例如下

roam~ 匹配 roams，foam，foams，也匹配 roam 本身

还可以附带一个距离参数在波浪符后面，取值为 0~2，默认=2，示例如下

roam~1 匹配 roams，foam，但是不匹配 foams，除非把距离修改为 2

### 临近搜索

临近搜索查找那些间隔一定距离的词条

要执行临近搜索，使用波浪符 ~ ，并在要搜索的短语末尾添加一个数字，示例如下

"jakarta apache"~10，表示在文档里搜索 apache 和 jakarta，互相之间间隔 10个 单词

### 范围搜索

示例

* mod\_date:\[20020101 TO 20030101\]

范围查询不限于日期或数字，字符串也支持，此时按字典数序，示例：

* title:{Aida TO Carmen}

{x TO y}，表示 x 与 y 之间，不包含 x 和 y
\[x TO y\]，表示 x 与 y 之间，且包含 x 和 y
\[x TO y}，也是可以滴

### 词条加权搜索

### 固定分值搜索

## 规格化字段

## 逻辑操作符

## 组合词条成子查询

## 注释

## Lucene 查询解析器 和 solr 标准查询解析器差异

